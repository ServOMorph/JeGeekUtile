:root[data-theme="nuit-foret"],
:root {
  --bg-main: #0a0a0a;
  --bg-secondary: #1a1a1a;
  --bg-card: #2a2a2a;
  --bg-card-hover: #3a3a3a;
  --accent-local: #6b8e23;
  --accent-cloud: #ff8c00;
  --text-primary: #c8c8c8;
  --text-secondary: #808080;
  --border-color: #6b8e23;
  --bg-header: #2d5016;
  --bg-nav: #4a4a4a;
  --bg-footer: #2d2d2d;
  --grid-color: #2d2d2d;
}

:root[data-theme="terre-ethique"] {
  --bg-main: #0a0a0a;
  --bg-secondary: #1a1512;
  --bg-card: #2d2419;
  --bg-card-hover: #3d3428;
  --accent-local: #7c9d6f;
  --accent-cloud: #b8956a;
  --text-primary: #d4c5b0;
  --text-secondary: #9d8b73;
  --border-color: #7c9d6f;
  --bg-header: #342a1f;
  --bg-nav: #3d3428;
  --bg-footer: #2d2419;
  --grid-color: #3d3428;
}

:root[data-theme="cryptage-nocturne"] {
  --bg-main: #0a0a0a;
  --bg-secondary: #0f1419;
  --bg-card: #1a2332;
  --bg-card-hover: #253142;
  --accent-local: #5a7a8a;
  --accent-cloud: #aa8a6a;
  --text-primary: #c0d0e0;
  --text-secondary: #8a9aaa;
  --border-color: #5a7a8a;
  --bg-header: #1e2d3d;
  --bg-nav: #253142;
  --bg-footer: #1e2d3d;
  --grid-color: #253142;
}

:root[data-theme="aurore-humaine"] {
  --bg-main: #0a0a0a;
  --bg-secondary: #1a140f;
  --bg-card: #2d2319;
  --bg-card-hover: #3d3229;
  --accent-local: #b8956a;
  --accent-cloud: #cc8a60;
  --text-primary: #d4c5b0;
  --text-secondary: #a89680;
  --border-color: #b8956a;
  --bg-header: #3d2a1f;
  --bg-nav: #3d3229;
  --bg-footer: #2d2319;
  --grid-color: #3d3229;
}

:root[data-theme="horizon-progres"] {
  --bg-main: #0a0a0a;
  --bg-secondary: #0f0f1a;
  --bg-card: #1a1a2d;
  --bg-card-hover: #252540;
  --accent-local: #7a6aa8;
  --accent-cloud: #b88a70;
  --text-primary: #c8c0d8;
  --text-secondary: #9888b8;
  --border-color: #7a6aa8;
  --bg-header: #1e1e3d;
  --bg-nav: #252540;
  --bg-footer: #1a1a2d;
  --grid-color: #252540;
}

/* ============================================
   MODES D'AFFICHAGE
   ============================================ */

/* Mode Économe (défaut) */
:root[data-mode="econome"],
:root {
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 12px;
  --space-lg: 20px;
  --space-xl: 30px;
  --radius-sm: 3px;
  --radius-md: 5px;
  --radius-lg: 8px;
  --transition-fast: 150ms ease;
  --transition-base: 200ms ease;
  --animation-duration: 150ms;
  --animation-scale: 1.02;
  --animation-translate: -2px;
}

/* Mode Hyper-économe */
:root[data-mode="hyper-econome"] {
  --space-xs: 2px;
  --space-sm: 4px;
  --space-md: 6px;
  --space-lg: 10px;
  --space-xl: 15px;
  --radius-sm: 0;
  --radius-md: 0;
  --radius-lg: 0;
  --transition-fast: 0ms;
  --transition-base: 0ms;
  --animation-duration: 0ms;
  --animation-scale: 1;
  --animation-translate: 0;
}

/* Mode Normal */
:root[data-mode="normal"] {
  --space-xs: 6px;
  --space-sm: 12px;
  --space-md: 18px;
  --space-lg: 28px;
  --space-xl: 42px;
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 16px;
  --transition-fast: 200ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-base: 300ms cubic-bezier(0.4, 0, 0.2, 1);
  --animation-duration: 300ms;
  --animation-scale: 1.05;
  --animation-translate: -4px;
  --shadow-card: 0 6px 16px rgba(0, 0, 0, 0.5);
  --shadow-hover: 0 12px 28px rgba(0, 0, 0, 0.5);
}

/* Mode Ultra */
:root[data-mode="ultra"] {
  --space-xs: 8px;
  --space-sm: 16px;
  --space-md: 24px;
  --space-lg: 36px;
  --space-xl: 56px;
  --radius-sm: 12px;
  --radius-md: 20px;
  --radius-lg: 28px;
  --transition-fast: 250ms cubic-bezier(0.34, 1.56, 0.64, 1);
  --transition-base: 400ms cubic-bezier(0.34, 1.56, 0.64, 1);
  --animation-duration: 500ms;
  --animation-scale: 1.08;
  --animation-translate: -8px;
  --shadow-card: 0 8px 30px rgba(0, 0, 0, 0.5), 0 0 40px var(--glow-color);
  --shadow-hover: 0 16px 50px rgba(0, 0, 0, 0.6), 0 0 60px var(--glow-color);
  --shadow-glow: 0 0 30px var(--glow-color), 0 0 60px var(--glow-color);
  --glow-color: rgba(107, 142, 35, 0.4);
  --glow-color-intense: rgba(107, 142, 35, 0.7);
}

/* Glow colors par thème en mode Ultra */
:root[data-mode="ultra"][data-theme="nuit-foret"] {
  --glow-color: rgba(107, 142, 35, 0.4);
  --glow-color-intense: rgba(107, 142, 35, 0.7);
}

:root[data-mode="ultra"][data-theme="terre-ethique"] {
  --glow-color: rgba(124, 157, 111, 0.4);
  --glow-color-intense: rgba(124, 157, 111, 0.7);
}

:root[data-mode="ultra"][data-theme="cryptage-nocturne"] {
  --glow-color: rgba(90, 122, 138, 0.4);
  --glow-color-intense: rgba(90, 122, 138, 0.7);
}

:root[data-mode="ultra"][data-theme="aurore-humaine"] {
  --glow-color: rgba(184, 149, 106, 0.4);
  --glow-color-intense: rgba(184, 149, 106, 0.7);
}

:root[data-mode="ultra"][data-theme="horizon-progres"] {
  --glow-color: rgba(122, 106, 168, 0.4);
  --glow-color-intense: rgba(122, 106, 168, 0.7);
}

/* Mode Supernova (Clair - Maximum) */
:root[data-mode="supernova"] {
  --bg-main: #ffffff;
  --bg-secondary: #f8f9fa;
  --bg-card: #ffffff;
  --bg-card-hover: #f0f4f8;
  --text-primary: #1a1a2e;
  --text-secondary: #4a5568;
  --bg-header: #f0f4f8;
  --bg-nav: #e8ecf1;
  --bg-footer: #f0f4f8;
  --grid-color: #e2e8f0;
  --space-xs: 10px;
  --space-sm: 20px;
  --space-md: 32px;
  --space-lg: 48px;
  --space-xl: 72px;
  --radius-sm: 16px;
  --radius-md: 24px;
  --radius-lg: 36px;
  --transition-fast: 300ms cubic-bezier(0.34, 1.56, 0.64, 1);
  --transition-base: 500ms cubic-bezier(0.34, 1.56, 0.64, 1);
  --animation-duration: 600ms;
  --animation-scale: 1.1;
  --animation-translate: -12px;
  --shadow-card: 0 10px 40px rgba(0, 0, 0, 0.1), 0 0 50px var(--nova-glow);
  --shadow-hover: 0 20px 60px rgba(0, 0, 0, 0.15), 0 0 80px var(--nova-glow);
  --shadow-glow: 0 0 40px var(--nova-glow), 0 0 80px var(--nova-glow);
  --nova-glow: rgba(107, 142, 35, 0.3);
  --nova-glow-intense: rgba(107, 142, 35, 0.6);
  --nova-gradient: linear-gradient(135deg, var(--accent-local), var(--accent-cloud));
}

/* Supernova par theme */
:root[data-mode="supernova"][data-theme="nuit-foret"] {
  --accent-local: #4a7c23;
  --accent-cloud: #e67300;
  --border-color: #4a7c23;
  --nova-glow: rgba(74, 124, 35, 0.35);
  --nova-glow-intense: rgba(74, 124, 35, 0.6);
}

:root[data-mode="supernova"][data-theme="terre-ethique"] {
  --accent-local: #5a7d4d;
  --accent-cloud: #a07550;
  --border-color: #5a7d4d;
  --nova-glow: rgba(90, 125, 77, 0.35);
  --nova-glow-intense: rgba(90, 125, 77, 0.6);
}

:root[data-mode="supernova"][data-theme="cryptage-nocturne"] {
  --accent-local: #3a5a6a;
  --accent-cloud: #8a6a4a;
  --border-color: #3a5a6a;
  --nova-glow: rgba(58, 90, 106, 0.35);
  --nova-glow-intense: rgba(58, 90, 106, 0.6);
}

:root[data-mode="supernova"][data-theme="aurore-humaine"] {
  --accent-local: #98754a;
  --accent-cloud: #ac6a40;
  --border-color: #98754a;
  --nova-glow: rgba(152, 117, 74, 0.35);
  --nova-glow-intense: rgba(152, 117, 74, 0.6);
}

:root[data-mode="supernova"][data-theme="horizon-progres"] {
  --accent-local: #5a4a88;
  --accent-cloud: #986a50;
  --border-color: #5a4a88;
  --nova-glow: rgba(90, 74, 136, 0.35);
  --nova-glow-intense: rgba(90, 74, 136, 0.6);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: var(--bg-secondary);
  color: var(--text-primary);
  font-family: 'Consolas', 'Monaco', monospace;
  font-size: 14px;
  line-height: 1.6;
}

#app {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

header {
  background: var(--bg-header);
  padding: 15px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 2px solid var(--border-color);
  flex-wrap: wrap;
  gap: 15px;
}

header h1 {
  font-size: 20px;
  color: var(--text-primary);
  font-weight: normal;
}

#stats-header {
  display: flex;
  gap: 20px;
  font-size: 13px;
}

.stat-item {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.stat-label {
  color: var(--accent-local);
  font-size: 11px;
}

.stat-value {
  color: var(--text-primary);
  font-weight: bold;
  font-size: 16px;
}

nav {
  background: var(--bg-nav);
  padding: 10px 20px;
  display: flex;
  gap: 10px;
  border-bottom: 1px solid var(--border-color);
}

nav button {
  background: transparent;
  color: var(--text-primary);
  border: none;
  padding: 8px 20px;
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  transition: background 0.2s;
}

nav button:hover {
  background: var(--bg-header);
}

nav button.active {
  background: var(--bg-header);
  color: var(--accent-local);
  border-bottom: 2px solid var(--border-color);
}

main {
  flex: 1;
  padding: 30px;
  overflow-y: auto;
  padding-bottom: 60px;
}

footer {
  position: fixed;
  bottom: 0;
  right: 0;
  padding: 10px 20px;
  background: var(--bg-footer);
  color: var(--accent-local);
  font-size: 11px;
  border-top-left-radius: 5px;
  border-top: 1px solid var(--border-color);
  border-left: 1px solid var(--border-color);
}

.dashboard-wrapper {
  display: flex;
  flex-direction: column;
  gap: 40px;
}

.ia-section {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.ia-section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 20px;
  background: var(--bg-nav);
  border-radius: 8px;
  border-left: 6px solid var(--accent-local);
}

.ia-section-header.local {
  border-left-color: var(--accent-local);
  background: var(--bg-header);
}

.ia-section-header.cloud {
  border-left-color: var(--accent-cloud);
  background: var(--bg-card);
}

.ia-section-header h2 {
  font-size: 18px;
  color: var(--text-primary);
  font-weight: bold;
  margin: 0;
}

.ia-section-header.local h2 {
  color: var(--accent-local);
}

.ia-section-header.cloud h2 {
  color: var(--accent-cloud);
}

.ia-count {
  font-size: 14px;
  color: var(--text-primary);
  background: var(--bg-footer);
  padding: 5px 15px;
  border-radius: 20px;
}

.dashboard-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 20px;
}

.ia-card {
  padding: 20px;
  border-radius: 8px;
  border: 3px solid var(--accent-local);
  cursor: pointer;
  transition: all 0.3s;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}

.ia-card.local {
  background: var(--bg-header);
  border-color: var(--accent-local);
}

.ia-card.local:hover {
  background: var(--bg-card-hover);
  transform: translateY(-3px);
  box-shadow: 0 4px 12px var(--accent-local);
  border-width: 4px;
}

.ia-card.cloud {
  background: var(--bg-card);
  border-color: var(--accent-cloud);
}

.ia-card.cloud:hover {
  background: var(--bg-card-hover);
  transform: translateY(-3px);
  box-shadow: 0 4px 12px var(--accent-cloud);
  border-width: 4px;
}

.ia-nom {
  font-size: 18px;
  font-weight: bold;
  color: var(--text-primary);
}

.ia-type {
  font-size: 12px;
  color: var(--accent-local);
  text-transform: uppercase;
}

.ia-type.cloud {
  color: var(--accent-cloud);
}

.ia-compteur {
  background: var(--bg-nav);
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 16px;
  font-weight: bold;
  color: var(--text-primary);
}

.btn-add-ia {
  background: var(--accent-local);
  color: var(--bg-main);
  border: none;
  padding: 12px 30px;
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  border-radius: 5px;
  font-weight: bold;
  margin-top: 20px;
  transition: background 0.2s;
}

.btn-add-ia:hover {
  background: var(--accent-cloud);
}

.form-container {
  background: var(--bg-nav);
  padding: 30px;
  border-radius: 8px;
  max-width: 600px;
  margin: 0 auto;
}

.form-group {
  margin: 20px 0;
}

label {
  display: block;
  margin-bottom: 8px;
  color: var(--accent-local);
  font-size: 13px;
}

input, select {
  background: var(--bg-footer);
  color: var(--text-primary);
  border: 1px solid var(--border-color);
  padding: 10px;
  width: 100%;
  font-family: inherit;
  font-size: 14px;
  border-radius: 3px;
}

input:focus, select:focus {
  outline: none;
  border-color: var(--text-primary);
}

.btn-submit {
  background: var(--accent-local);
  color: var(--bg-main);
  border: none;
  padding: 12px 30px;
  cursor: pointer;
  font-family: inherit;
  font-size: 14px;
  border-radius: 5px;
  font-weight: bold;
  margin-top: 10px;
}

.btn-submit:hover {
  background: var(--bg-header);
  color: var(--text-primary);
}

.ia-list {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.ia-item {
  background: var(--bg-nav);
  padding: 20px;
  border-radius: 5px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-left: 4px solid var(--accent-local);
}

.ia-item.cloud {
  border-left-color: var(--accent-cloud);
}

.ia-info {
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.ia-actions {
  display: flex;
  gap: 10px;
}

.btn-delete {
  background: var(--accent-cloud);
  color: var(--text-primary);
  border: none;
  padding: 6px 15px;
  cursor: pointer;
  font-family: inherit;
  font-size: 12px;
  border-radius: 3px;
}

.btn-delete:hover {
  background: var(--bg-card-hover);
}

.stats-container {
  display: flex;
  flex-direction: column;
  gap: 30px;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
}

.metric-card {
  background: var(--bg-nav);
  padding: 20px;
  border-radius: 5px;
  border-left: 4px solid var(--border-color);
}

.metric-label {
  font-size: 12px;
  color: var(--accent-local);
  margin-bottom: 8px;
}

.metric-value {
  font-size: 32px;
  color: var(--text-primary);
  font-weight: bold;
}

.metric-detail {
  font-size: 12px;
  color: var(--text-primary);
  margin-top: 5px;
}

.progress-bar {
  background: var(--bg-footer);
  height: 30px;
  border-radius: 5px;
  overflow: hidden;
  margin-top: 10px;
}

.progress-fill {
  height: 100%;
  background: var(--accent-local);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--bg-main);
  font-weight: bold;
  font-size: 12px;
  transition: width 0.3s;
}

.progress-fill.warning {
  background: var(--accent-cloud);
}

.table-container {
  background: var(--bg-nav);
  padding: 20px;
  border-radius: 8px;
  overflow-x: auto;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th {
  background: var(--bg-header);
  color: var(--accent-local);
  padding: 12px;
  text-align: left;
  font-size: 12px;
  text-transform: uppercase;
}

td {
  padding: 12px;
  border-bottom: 1px solid var(--bg-footer);
  color: var(--text-primary);
}

tr:hover {
  background: var(--bg-footer);
}

.notification {
  position: fixed;
  bottom: 60px;
  right: 20px;
  background: var(--bg-header);
  color: var(--text-primary);
  padding: 15px 25px;
  border-radius: 5px;
  border: 2px solid var(--border-color);
  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  z-index: 1000;
  transition: opacity 0.3s;
}

.notification.hidden {
  opacity: 0;
  pointer-events: none;
}

.notification.success {
  border-color: var(--accent-local);
}

.notification.error {
  border-color: var(--accent-cloud);
  background: var(--bg-nav);
}

.filters-bar {
  display: flex;
  gap: 10px;
  margin-bottom: 30px;
  flex-wrap: wrap;
  align-items: center;
  background: var(--bg-nav);
  padding: 15px 20px;
  border-radius: 8px;
  border-left: 4px solid var(--border-color);
}

.filters-group {
  display: flex;
  gap: 8px;
  align-items: center;
}

.filters-label {
  color: var(--accent-local);
  font-size: 12px;
  font-weight: bold;
  margin-right: 5px;
}

.filter-btn {
  background: var(--bg-footer);
  color: var(--text-primary);
  border: 1px solid var(--border-color);
  padding: 8px 16px;
  cursor: pointer;
  font-family: inherit;
  font-size: 12px;
  border-radius: 5px;
  transition: all 0.2s;
}

.filter-btn:hover {
  background: var(--bg-header);
  color: var(--text-primary);
}

.filter-btn.active {
  background: var(--accent-local);
  color: var(--bg-main);
  font-weight: bold;
  border-color: var(--border-color);
}

.action-buttons {
  display: flex;
  gap: 10px;
  margin-left: auto;
}

.action-btn {
  background: var(--bg-header);
  color: var(--text-primary);
  border: 1px solid var(--border-color);
  padding: 8px 16px;
  cursor: pointer;
  font-family: inherit;
  font-size: 12px;
  border-radius: 5px;
  transition: all 0.2s;
}

.action-btn:hover {
  background: var(--accent-local);
  color: var(--bg-main);
}

.charts-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 25px;
  margin-bottom: 25px;
}

.chart-container {
  background: var(--bg-nav);
  padding: 25px;
  border-radius: 8px;
  border-left: 4px solid var(--border-color);
  min-height: 300px;
}

.chart-container.full-width {
  grid-column: 1 / -1;
}

.chart-title {
  color: var(--accent-local);
  font-size: 14px;
  font-weight: bold;
  margin-bottom: 15px;
  text-align: center;
}

.chart-canvas {
  position: relative;
  height: 280px;
}

.chart-canvas canvas {
  max-height: 280px;
}

.theme-selector {
  display: flex;
  gap: 8px;
  align-items: center;
}

.theme-selector-label {
  color: var(--text-secondary);
  font-size: 11px;
  margin-right: 5px;
}

.theme-btn {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 2px solid transparent;
  cursor: pointer;
  transition: all 0.2s;
  position: relative;
}

.theme-btn:hover {
  transform: scale(1.1);
  border-color: var(--text-primary);
}

.theme-btn.active {
  border-color: var(--text-primary);
  box-shadow: 0 0 8px var(--border-color);
}

.theme-btn[data-theme="nuit-foret"] {
  background: linear-gradient(135deg, #0a0a0a 0%, #6b8e23 100%);
}

.theme-btn[data-theme="terre-ethique"] {
  background: linear-gradient(135deg, #1a1512 0%, #7c9d6f 100%);
}

.theme-btn[data-theme="cryptage-nocturne"] {
  background: linear-gradient(135deg, #0f1419 0%, #5a7a8a 100%);
}

.theme-btn[data-theme="aurore-humaine"] {
  background: linear-gradient(135deg, #1a140f 0%, #b8956a 100%);
}

.theme-btn[data-theme="horizon-progres"] {
  background: linear-gradient(135deg, #0f0f1a 0%, #7a6aa8 100%);
}

@media (max-width: 1200px) {
  .charts-grid {
    grid-template-columns: 1fr;
  }

  .chart-container.full-width {
    grid-column: 1;
  }
}

/* ============================================
   SÉLECTEUR DE MODE
   ============================================ */

.mode-selector {
  display: flex;
  gap: 6px;
  align-items: center;
  margin-left: 20px;
  padding-left: 20px;
  border-left: 1px solid var(--bg-nav);
}

.mode-selector-label {
  color: var(--text-secondary);
  font-size: 11px;
  margin-right: 5px;
}

.mode-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  background: var(--bg-card);
  border: 1px solid var(--bg-nav);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition-fast);
  font-size: 12px;
  font-weight: bold;
  color: var(--text-secondary);
  font-family: inherit;
}

.mode-btn:hover {
  background: var(--bg-card-hover);
  border-color: var(--border-color);
  color: var(--text-primary);
}

.mode-btn.active {
  background: var(--bg-header);
  border-color: var(--border-color);
  color: var(--accent-local);
}

.mode-icon {
  line-height: 1;
}

/* ============================================
   ANIMATIONS PAR MODE
   ============================================ */

/* Mode Hyper-économe : aucune animation */
:root[data-mode="hyper-econome"] * {
  animation: none !important;
  transition: none !important;
}

:root[data-mode="hyper-econome"] .ia-card:hover {
  transform: none;
  box-shadow: none;
  border-width: 3px;
}

:root[data-mode="hyper-econome"] nav button:hover,
:root[data-mode="hyper-econome"] .btn-add-ia:hover,
:root[data-mode="hyper-econome"] .btn-submit:hover {
  transform: none;
}

:root[data-mode="hyper-econome"] .mode-selector {
  gap: 4px;
  margin-left: 10px;
  padding-left: 10px;
}

:root[data-mode="hyper-econome"] header {
  padding: 10px 15px;
  gap: 10px;
}

:root[data-mode="hyper-econome"] main {
  padding: 15px;
}

:root[data-mode="hyper-econome"] .ia-card {
  padding: 12px;
  gap: 6px;
  border-radius: 0;
}

/* Mode Économe : animations minimales */
:root[data-mode="econome"] .ia-card {
  transition: border-color var(--transition-fast);
}

:root[data-mode="econome"] .ia-card:hover {
  transform: translateY(var(--animation-translate));
}

:root[data-mode="econome"] nav button,
:root[data-mode="econome"] .btn-add-ia,
:root[data-mode="econome"] .filter-btn {
  transition: background var(--transition-fast), opacity var(--transition-fast);
}

/* Mode Normal : animations enrichies */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes cardPulse {
  0%, 100% { box-shadow: 0 4px 12px var(--accent-local); }
  50% { box-shadow: 0 8px 24px var(--accent-local); }
}

:root[data-mode="normal"] .ia-card {
  transition: transform var(--transition-base),
              box-shadow var(--transition-base),
              border-color var(--transition-base),
              border-width var(--transition-fast);
  border-radius: var(--radius-lg);
}

:root[data-mode="normal"] .ia-card:hover {
  transform: translateY(var(--animation-translate)) scale(var(--animation-scale));
  box-shadow: var(--shadow-hover);
}

:root[data-mode="normal"] .ia-card:active {
  transform: translateY(0) scale(0.98);
  transition-duration: 50ms;
}

:root[data-mode="normal"] nav button,
:root[data-mode="normal"] .btn-add-ia,
:root[data-mode="normal"] .btn-submit,
:root[data-mode="normal"] .filter-btn,
:root[data-mode="normal"] .action-btn {
  transition: transform var(--transition-fast),
              background var(--transition-fast),
              box-shadow var(--transition-fast);
}

:root[data-mode="normal"] nav button:hover,
:root[data-mode="normal"] .btn-add-ia:hover,
:root[data-mode="normal"] .btn-submit:hover,
:root[data-mode="normal"] .filter-btn:hover,
:root[data-mode="normal"] .action-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

:root[data-mode="normal"] nav button:active,
:root[data-mode="normal"] .btn-add-ia:active,
:root[data-mode="normal"] .btn-submit:active {
  transform: translateY(0) scale(0.98);
}

:root[data-mode="normal"] input:focus,
:root[data-mode="normal"] select:focus {
  transform: scale(1.01);
  box-shadow: 0 0 0 3px rgba(107, 142, 35, 0.2);
}

:root[data-mode="normal"] .metric-card,
:root[data-mode="normal"] .chart-container,
:root[data-mode="normal"] .table-container {
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-card);
}

:root[data-mode="normal"] .dashboard-wrapper {
  gap: 50px;
}

:root[data-mode="normal"] .ia-section-header {
  border-radius: var(--radius-lg);
}

:root[data-mode="normal"] main {
  padding: 40px;
}

:root[data-mode="normal"] header {
  padding: 20px 30px;
}

/* ============================================
   MODE ULTRA : Animations spectaculaires
   ============================================ */

/* Keyframes Ultra */
@keyframes ultraPulse {
  0%, 100% {
    box-shadow: 0 0 20px var(--glow-color), 0 0 40px var(--glow-color);
    transform: scale(1);
  }
  50% {
    box-shadow: 0 0 40px var(--glow-color-intense), 0 0 80px var(--glow-color);
    transform: scale(1.02);
  }
}

@keyframes ultraFloat {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

@keyframes ultraGlow {
  0%, 100% {
    filter: drop-shadow(0 0 10px var(--glow-color));
  }
  50% {
    filter: drop-shadow(0 0 25px var(--glow-color-intense));
  }
}

@keyframes ultraShimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes ultraBorderFlow {
  0% { border-color: var(--accent-local); }
  50% { border-color: var(--accent-cloud); }
  100% { border-color: var(--accent-local); }
}

@keyframes ultraRipple {
  0% {
    transform: scale(0);
    opacity: 1;
  }
  100% {
    transform: scale(4);
    opacity: 0;
  }
}

@keyframes ultraCardGlow {
  0%, 100% {
    box-shadow: 0 4px 20px var(--glow-color), inset 0 0 20px rgba(255,255,255,0.02);
  }
  50% {
    box-shadow: 0 8px 40px var(--glow-color-intense), inset 0 0 30px rgba(255,255,255,0.05);
  }
}

/* Mode Ultra button special */
:root[data-mode="ultra"] .mode-btn[data-mode="ultra"] {
  background: linear-gradient(135deg, var(--accent-local), var(--accent-cloud));
  animation: ultraGlow 2s ease-in-out infinite;
}

/* Cards Ultra */
:root[data-mode="ultra"] .ia-card {
  transition: transform var(--transition-base),
              box-shadow var(--transition-base),
              border-color var(--transition-base);
  border-radius: var(--radius-lg);
  position: relative;
  overflow: hidden;
  animation: ultraCardGlow 3s ease-in-out infinite;
}

:root[data-mode="ultra"] .ia-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.08),
    transparent
  );
  transition: left 0.6s ease;
}

:root[data-mode="ultra"] .ia-card:hover::before {
  left: 100%;
}

:root[data-mode="ultra"] .ia-card:hover {
  transform: translateY(var(--animation-translate)) scale(var(--animation-scale));
  box-shadow: var(--shadow-hover);
  animation: ultraBorderFlow 2s ease infinite;
}

:root[data-mode="ultra"] .ia-card:active {
  transform: translateY(0) scale(0.95);
  transition-duration: 100ms;
}

/* Boutons Ultra */
:root[data-mode="ultra"] nav button,
:root[data-mode="ultra"] .btn-add-ia,
:root[data-mode="ultra"] .btn-submit,
:root[data-mode="ultra"] .filter-btn,
:root[data-mode="ultra"] .action-btn {
  position: relative;
  overflow: hidden;
  transition: transform var(--transition-fast),
              box-shadow var(--transition-fast),
              background-color var(--transition-fast);
  border-radius: var(--radius-md);
}

:root[data-mode="ultra"] nav button::after,
:root[data-mode="ultra"] .btn-add-ia::after,
:root[data-mode="ultra"] .btn-submit::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 5px;
  height: 5px;
  background: rgba(255, 255, 255, 0.4);
  border-radius: 50%;
  transform: translate(-50%, -50%) scale(0);
  opacity: 0;
}

:root[data-mode="ultra"] nav button:active::after,
:root[data-mode="ultra"] .btn-add-ia:active::after,
:root[data-mode="ultra"] .btn-submit:active::after {
  animation: ultraRipple 0.6s ease-out;
}

:root[data-mode="ultra"] nav button:hover,
:root[data-mode="ultra"] .btn-add-ia:hover,
:root[data-mode="ultra"] .btn-submit:hover,
:root[data-mode="ultra"] .filter-btn:hover,
:root[data-mode="ultra"] .action-btn:hover {
  transform: translateY(-4px) scale(1.05);
  box-shadow: 0 8px 25px var(--glow-color);
}

:root[data-mode="ultra"] nav button:active,
:root[data-mode="ultra"] .btn-add-ia:active,
:root[data-mode="ultra"] .btn-submit:active {
  transform: translateY(0) scale(0.95);
  transition-duration: 100ms;
}

:root[data-mode="ultra"] .btn-add-ia,
:root[data-mode="ultra"] .btn-submit {
  background: linear-gradient(135deg, var(--accent-local), var(--bg-header));
  animation: ultraGlow 2s ease-in-out infinite;
}

/* Inputs Ultra */
:root[data-mode="ultra"] input:focus,
:root[data-mode="ultra"] select:focus {
  transform: scale(1.02);
  box-shadow: 0 0 0 4px var(--glow-color), 0 8px 25px rgba(0, 0, 0, 0.3);
  border-radius: var(--radius-md);
}

/* Charts et containers Ultra */
:root[data-mode="ultra"] .metric-card,
:root[data-mode="ultra"] .chart-container,
:root[data-mode="ultra"] .table-container,
:root[data-mode="ultra"] .filters-bar {
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-card);
  position: relative;
  overflow: hidden;
}

:root[data-mode="ultra"] .metric-card::before,
:root[data-mode="ultra"] .chart-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.03),
    transparent
  );
  animation: ultraShimmer 3s ease-in-out infinite;
}

:root[data-mode="ultra"] .metric-value {
  text-shadow: 0 0 20px var(--glow-color);
}

/* Header flottant Ultra */
:root[data-mode="ultra"] header {
  animation: ultraFloat 4s ease-in-out infinite;
  box-shadow: var(--shadow-card);
  padding: 25px 40px;
}

/* Section headers Ultra */
:root[data-mode="ultra"] .ia-section-header {
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 20px var(--glow-color);
}

:root[data-mode="ultra"] .ia-section-header.local {
  animation: ultraPulse 3s ease-in-out infinite;
}

/* Progress bar Ultra */
:root[data-mode="ultra"] .progress-fill {
  background: linear-gradient(90deg, var(--accent-local), var(--accent-cloud));
  box-shadow: 0 0 20px var(--glow-color);
}

/* Notification Ultra */
:root[data-mode="ultra"] .notification {
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-glow);
  animation: ultraFloat 2s ease-in-out infinite;
}

/* Dashboard wrapper Ultra */
:root[data-mode="ultra"] .dashboard-wrapper {
  gap: 60px;
}

:root[data-mode="ultra"] .dashboard-container {
  gap: 25px;
}

/* Main Ultra */
:root[data-mode="ultra"] main {
  padding: 50px;
}

/* Nav Ultra */
:root[data-mode="ultra"] nav {
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

:root[data-mode="ultra"] nav button.active {
  box-shadow: 0 0 15px var(--glow-color);
}

/* Scrollbar Ultra */
:root[data-mode="ultra"] ::-webkit-scrollbar {
  width: 12px;
}

:root[data-mode="ultra"] ::-webkit-scrollbar-track {
  background: var(--bg-main);
  border-radius: 6px;
}

:root[data-mode="ultra"] ::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, var(--accent-local), var(--accent-cloud));
  border-radius: 6px;
  box-shadow: 0 0 10px var(--glow-color);
}

:root[data-mode="ultra"] ::-webkit-scrollbar-thumb:hover {
  box-shadow: 0 0 20px var(--glow-color-intense);
}

/* Table Ultra */
:root[data-mode="ultra"] th {
  text-shadow: 0 0 10px var(--glow-color);
}

:root[data-mode="ultra"] tr:hover {
  background: rgba(107, 142, 35, 0.1);
  box-shadow: inset 0 0 20px var(--glow-color);
}

/* ============================================
   MODE SUPERNOVA : Theme clair + Maximum effets
   ============================================ */

/* Keyframes Supernova */
@keyframes novaPulse {
  0%, 100% {
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1), 0 0 50px var(--nova-glow);
    transform: scale(1);
  }
  50% {
    box-shadow: 0 15px 60px rgba(0, 0, 0, 0.15), 0 0 100px var(--nova-glow-intense);
    transform: scale(1.03);
  }
}

@keyframes novaFloat {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  25% { transform: translateY(-8px) rotate(0.5deg); }
  75% { transform: translateY(-4px) rotate(-0.5deg); }
}

@keyframes novaGlow {
  0%, 100% {
    filter: drop-shadow(0 0 15px var(--nova-glow));
  }
  50% {
    filter: drop-shadow(0 0 35px var(--nova-glow-intense));
  }
}

@keyframes novaShimmer {
  0% { background-position: -300% 0; }
  100% { background-position: 300% 0; }
}

@keyframes novaRainbow {
  0% { filter: hue-rotate(0deg) drop-shadow(0 0 20px var(--nova-glow)); }
  50% { filter: hue-rotate(15deg) drop-shadow(0 0 40px var(--nova-glow-intense)); }
  100% { filter: hue-rotate(0deg) drop-shadow(0 0 20px var(--nova-glow)); }
}

@keyframes novaBorderPulse {
  0%, 100% {
    border-color: var(--accent-local);
    box-shadow: 0 0 20px var(--nova-glow);
  }
  33% {
    border-color: var(--accent-cloud);
    box-shadow: 0 0 40px var(--nova-glow-intense);
  }
  66% {
    border-color: var(--accent-local);
    box-shadow: 0 0 30px var(--nova-glow);
  }
}

@keyframes novaRippleExpand {
  0% {
    transform: scale(0);
    opacity: 1;
    background: var(--nova-glow);
  }
  100% {
    transform: scale(6);
    opacity: 0;
    background: transparent;
  }
}

@keyframes novaTextGlow {
  0%, 100% {
    text-shadow: 0 0 10px var(--nova-glow), 0 2px 4px rgba(0,0,0,0.1);
  }
  50% {
    text-shadow: 0 0 30px var(--nova-glow-intense), 0 4px 8px rgba(0,0,0,0.15);
  }
}

@keyframes novaGradientFlow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes novaParticle {
  0% {
    opacity: 0;
    transform: translateY(0) scale(0);
  }
  50% {
    opacity: 1;
    transform: translateY(-20px) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(-40px) scale(0);
  }
}

/* Mode Supernova button special */
:root[data-mode="supernova"] .mode-btn[data-mode="supernova"] {
  background: linear-gradient(135deg, #fff 0%, var(--accent-local) 50%, var(--accent-cloud) 100%);
  background-size: 200% 200%;
  animation: novaGradientFlow 3s ease infinite, novaGlow 2s ease-in-out infinite;
  color: #fff;
  text-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

/* Cards Supernova */
:root[data-mode="supernova"] .ia-card {
  transition: transform var(--transition-base),
              box-shadow var(--transition-base),
              border-color var(--transition-base);
  border-radius: var(--radius-lg);
  position: relative;
  overflow: hidden;
  animation: novaPulse 4s ease-in-out infinite;
  background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
  border-width: 3px;
}

:root[data-mode="supernova"] .ia-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -150%;
  width: 150%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.8),
    rgba(255, 255, 255, 0.4),
    transparent
  );
  transition: left 0.8s ease;
}

:root[data-mode="supernova"] .ia-card::after {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, var(--nova-glow) 0%, transparent 70%);
  opacity: 0;
  transition: opacity 0.5s ease;
  pointer-events: none;
}

:root[data-mode="supernova"] .ia-card:hover::before {
  left: 150%;
}

:root[data-mode="supernova"] .ia-card:hover::after {
  opacity: 0.5;
}

:root[data-mode="supernova"] .ia-card:hover {
  transform: translateY(var(--animation-translate)) scale(var(--animation-scale));
  box-shadow: var(--shadow-hover);
  animation: novaBorderPulse 1.5s ease infinite;
}

:root[data-mode="supernova"] .ia-card:active {
  transform: translateY(0) scale(0.92);
  transition-duration: 80ms;
}

/* Boutons Supernova */
:root[data-mode="supernova"] nav button,
:root[data-mode="supernova"] .btn-add-ia,
:root[data-mode="supernova"] .btn-submit,
:root[data-mode="supernova"] .filter-btn,
:root[data-mode="supernova"] .action-btn {
  position: relative;
  overflow: hidden;
  transition: transform var(--transition-fast),
              box-shadow var(--transition-fast),
              background-color var(--transition-fast);
  border-radius: var(--radius-md);
  background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-nav) 100%);
}

:root[data-mode="supernova"] nav button::after,
:root[data-mode="supernova"] .btn-add-ia::after,
:root[data-mode="supernova"] .btn-submit::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 10px;
  height: 10px;
  background: var(--nova-glow-intense);
  border-radius: 50%;
  transform: translate(-50%, -50%) scale(0);
  opacity: 0;
}

:root[data-mode="supernova"] nav button:active::after,
:root[data-mode="supernova"] .btn-add-ia:active::after,
:root[data-mode="supernova"] .btn-submit:active::after {
  animation: novaRippleExpand 0.8s ease-out;
}

:root[data-mode="supernova"] nav button:hover,
:root[data-mode="supernova"] .btn-add-ia:hover,
:root[data-mode="supernova"] .btn-submit:hover,
:root[data-mode="supernova"] .filter-btn:hover,
:root[data-mode="supernova"] .action-btn:hover {
  transform: translateY(-6px) scale(1.08);
  box-shadow: 0 12px 35px var(--nova-glow);
}

:root[data-mode="supernova"] nav button:active,
:root[data-mode="supernova"] .btn-add-ia:active,
:root[data-mode="supernova"] .btn-submit:active {
  transform: translateY(0) scale(0.92);
  transition-duration: 80ms;
}

:root[data-mode="supernova"] .btn-add-ia,
:root[data-mode="supernova"] .btn-submit {
  background: linear-gradient(135deg, var(--accent-local), var(--accent-cloud));
  background-size: 200% 200%;
  animation: novaGradientFlow 4s ease infinite, novaGlow 2.5s ease-in-out infinite;
  color: #fff;
  border: none;
}

/* Inputs Supernova */
:root[data-mode="supernova"] input,
:root[data-mode="supernova"] select {
  background: #fff;
  border: 2px solid var(--grid-color);
  border-radius: var(--radius-md);
}

:root[data-mode="supernova"] input:focus,
:root[data-mode="supernova"] select:focus {
  transform: scale(1.03);
  box-shadow: 0 0 0 5px var(--nova-glow), 0 10px 30px rgba(0, 0, 0, 0.15);
  border-color: var(--accent-local);
}

/* Charts et containers Supernova */
:root[data-mode="supernova"] .metric-card,
:root[data-mode="supernova"] .chart-container,
:root[data-mode="supernova"] .table-container,
:root[data-mode="supernova"] .filters-bar {
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-card);
  position: relative;
  overflow: hidden;
  background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
}

:root[data-mode="supernova"] .metric-card::before,
:root[data-mode="supernova"] .chart-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: -200%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.6),
    rgba(255, 255, 255, 0.3),
    transparent
  );
  animation: novaShimmer 4s ease-in-out infinite;
}

:root[data-mode="supernova"] .metric-value {
  animation: novaTextGlow 3s ease-in-out infinite;
  font-size: 36px;
}

/* Header flottant Supernova */
:root[data-mode="supernova"] header {
  animation: novaFloat 5s ease-in-out infinite;
  box-shadow: var(--shadow-card);
  padding: 30px 50px;
  background: linear-gradient(135deg, #fff 0%, var(--bg-header) 100%);
}

:root[data-mode="supernova"] header h1 {
  animation: novaTextGlow 3s ease-in-out infinite;
  background: linear-gradient(135deg, var(--accent-local), var(--accent-cloud));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Section headers Supernova */
:root[data-mode="supernova"] .ia-section-header {
  border-radius: var(--radius-lg);
  box-shadow: 0 6px 25px var(--nova-glow);
  background: linear-gradient(135deg, #fff 0%, var(--bg-header) 100%);
}

:root[data-mode="supernova"] .ia-section-header.local {
  animation: novaPulse 4s ease-in-out infinite;
}

:root[data-mode="supernova"] .ia-section-header.local h2,
:root[data-mode="supernova"] .ia-section-header.cloud h2 {
  animation: novaTextGlow 2.5s ease-in-out infinite;
}

/* Progress bar Supernova */
:root[data-mode="supernova"] .progress-bar {
  background: var(--grid-color);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

:root[data-mode="supernova"] .progress-fill {
  background: linear-gradient(90deg, var(--accent-local), var(--accent-cloud), var(--accent-local));
  background-size: 200% 100%;
  animation: novaGradientFlow 3s ease infinite;
  box-shadow: 0 0 25px var(--nova-glow);
  border-radius: var(--radius-lg);
}

/* Notification Supernova */
:root[data-mode="supernova"] .notification {
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-glow);
  animation: novaFloat 2.5s ease-in-out infinite;
  background: #fff;
  border: 2px solid var(--accent-local);
}

/* Dashboard wrapper Supernova */
:root[data-mode="supernova"] .dashboard-wrapper {
  gap: 70px;
}

:root[data-mode="supernova"] .dashboard-container {
  gap: 30px;
}

/* Main Supernova */
:root[data-mode="supernova"] main {
  padding: 60px;
  background: linear-gradient(180deg, var(--bg-secondary) 0%, #fff 100%);
}

/* Nav Supernova */
:root[data-mode="supernova"] nav {
  box-shadow: 0 6px 25px rgba(0, 0, 0, 0.08);
  background: linear-gradient(90deg, var(--bg-nav) 0%, #fff 50%, var(--bg-nav) 100%);
  border-bottom: 2px solid var(--grid-color);
}

:root[data-mode="supernova"] nav button.active {
  box-shadow: 0 0 20px var(--nova-glow);
  background: linear-gradient(135deg, var(--accent-local), var(--accent-cloud));
  color: #fff;
  animation: novaGlow 2s ease-in-out infinite;
}

/* Scrollbar Supernova */
:root[data-mode="supernova"] ::-webkit-scrollbar {
  width: 14px;
}

:root[data-mode="supernova"] ::-webkit-scrollbar-track {
  background: var(--bg-secondary);
  border-radius: 7px;
}

:root[data-mode="supernova"] ::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, var(--accent-local), var(--accent-cloud));
  border-radius: 7px;
  box-shadow: 0 0 15px var(--nova-glow);
}

:root[data-mode="supernova"] ::-webkit-scrollbar-thumb:hover {
  box-shadow: 0 0 25px var(--nova-glow-intense);
}

/* Table Supernova */
:root[data-mode="supernova"] table {
  border-radius: var(--radius-md);
  overflow: hidden;
}

:root[data-mode="supernova"] th {
  animation: novaTextGlow 3s ease-in-out infinite;
  background: linear-gradient(135deg, var(--accent-local), var(--accent-cloud));
  color: #fff;
}

:root[data-mode="supernova"] tr:hover {
  background: var(--nova-glow);
  box-shadow: inset 0 0 30px var(--nova-glow);
}

:root[data-mode="supernova"] td {
  border-bottom: 1px solid var(--grid-color);
}

/* Form container Supernova */
:root[data-mode="supernova"] .form-container {
  background: linear-gradient(145deg, #fff 0%, var(--bg-nav) 100%);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-card);
}

/* Footer Supernova */
:root[data-mode="supernova"] footer {
  background: linear-gradient(90deg, #fff, var(--bg-footer));
  box-shadow: -5px -5px 20px var(--nova-glow);
  border-radius: var(--radius-lg) 0 0 0;
}

/* IA list Supernova */
:root[data-mode="supernova"] .ia-item {
  background: linear-gradient(135deg, #fff 0%, var(--bg-nav) 100%);
  border-radius: var(--radius-md);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
  transition: transform var(--transition-fast), box-shadow var(--transition-fast);
}

:root[data-mode="supernova"] .ia-item:hover {
  transform: translateX(10px);
  box-shadow: 0 8px 30px var(--nova-glow);
}

/* IA compteur Supernova */
:root[data-mode="supernova"] .ia-compteur {
  background: linear-gradient(135deg, var(--accent-local), var(--accent-cloud));
  color: #fff;
  box-shadow: 0 4px 15px var(--nova-glow);
}

/* ============================================
   PROFIL UTILISATEUR - Style Gaming/Discord
   ============================================ */

/* Keyframes Profil */
@keyframes orbRingRotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes orbPulse {
  0%, 100% {
    box-shadow: 0 0 10px var(--orb-color), 0 0 20px var(--orb-color);
    transform: scale(1);
  }
  50% {
    box-shadow: 0 0 20px var(--orb-color), 0 0 40px var(--orb-color);
    transform: scale(1.05);
  }
}

@keyframes statusPulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.2); opacity: 0.8; }
}

@keyframes levelGlow {
  0%, 100% {
    box-shadow: 0 0 5px var(--accent-local), 0 0 10px var(--accent-local);
  }
  50% {
    box-shadow: 0 0 10px var(--accent-local), 0 0 20px var(--accent-cloud);
  }
}

@keyframes xpShine {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes cardSlideIn {
  from {
    opacity: 0;
    transform: translateY(-10px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Variables Orbe */
:root {
  --orb-color: var(--accent-local);
  --orb-color-secondary: var(--accent-cloud);
  --status-online: #3ba55d;
  --status-idle: #faa81a;
  --status-dnd: #ed4245;
  --status-offline: #747f8d;
}

/* Container Profil Header */
.user-profile {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-left: auto;
  padding-left: 20px;
  border-left: 1px solid var(--bg-nav);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.user-profile:hover {
  opacity: 0.9;
}

/* Orbe Avatar */
.profile-orb {
  position: relative;
  width: 44px;
  height: 44px;
}

/* Anneau Gradient Rotatif */
.orb-ring {
  position: absolute;
  inset: -3px;
  border-radius: 50%;
  background: conic-gradient(
    from 0deg,
    var(--accent-local),
    var(--accent-cloud),
    var(--accent-local)
  );
  animation: orbRingRotate 4s linear infinite;
  opacity: 0.8;
}

.orb-ring::before {
  content: '';
  position: absolute;
  inset: 3px;
  border-radius: 50%;
  background: var(--bg-secondary);
}

.orb-ring.large {
  inset: -4px;
}

.orb-ring.large::before {
  inset: 4px;
}

/* Avatar */
.orb-avatar {
  position: absolute;
  inset: 2px;
  border-radius: 50%;
  overflow: hidden;
  background: var(--bg-card);
  display: flex;
  align-items: center;
  justify-content: center;
}

.orb-avatar.large {
  inset: 3px;
}

.orb-avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: none;
}

.orb-avatar img.loaded {
  display: block;
}

.avatar-fallback {
  font-size: 14px;
  font-weight: bold;
  color: var(--accent-local);
  text-transform: uppercase;
}

.avatar-fallback.large {
  font-size: 28px;
}

/* Indicateur Statut */
.orb-status {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  border: 2px solid var(--bg-secondary);
  background: var(--status-online);
  z-index: 2;
}

.orb-status.large {
  width: 18px;
  height: 18px;
  border-width: 3px;
}

.orb-status[data-status="online"] {
  background: var(--status-online);
  animation: statusPulse 2s ease-in-out infinite;
}

.orb-status[data-status="idle"] {
  background: var(--status-idle);
}

.orb-status[data-status="dnd"] {
  background: var(--status-dnd);
}

.orb-status[data-status="offline"] {
  background: var(--status-offline);
  animation: none;
}

/* Badge Niveau */
.orb-level {
  position: absolute;
  top: -4px;
  right: -4px;
  min-width: 18px;
  height: 18px;
  padding: 0 4px;
  border-radius: 9px;
  background: linear-gradient(135deg, var(--accent-local), var(--accent-cloud));
  border: 2px solid var(--bg-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  font-weight: bold;
  color: var(--bg-main);
  z-index: 2;
  animation: levelGlow 3s ease-in-out infinite;
}

/* Info Profil */
.profile-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.profile-name {
  font-size: 13px;
  font-weight: bold;
  color: var(--text-primary);
}

.profile-title {
  font-size: 10px;
  color: var(--accent-local);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* ============================================
   CARTE PROFIL (Popup)
   ============================================ */

.profile-card {
  position: fixed;
  top: 80px;
  right: 20px;
  width: 320px;
  background: var(--bg-card);
  border: 2px solid var(--border-color);
  border-radius: 12px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
  z-index: 1000;
  overflow: hidden;
  animation: cardSlideIn 0.3s ease-out;
}

.profile-card.hidden {
  display: none;
}

/* Header Card */
.profile-card-header {
  position: relative;
  padding: 20px;
  background: linear-gradient(135deg, var(--bg-header) 0%, var(--bg-nav) 100%);
  display: flex;
  align-items: flex-start;
  gap: 15px;
}

.profile-card-orb {
  position: relative;
  width: 72px;
  height: 72px;
  flex-shrink: 0;
}

/* Badges */
.profile-card-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 5px;
}

.profile-badge {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 10px;
  font-size: 10px;
  color: var(--text-primary);
}

.profile-badge-icon {
  font-size: 12px;
}

.profile-badge.rare {
  background: linear-gradient(135deg, var(--accent-local), var(--accent-cloud));
  border-color: transparent;
  color: var(--bg-main);
}

.profile-badge.legendary {
  background: linear-gradient(135deg, #ffd700, #ff8c00);
  border-color: transparent;
  color: var(--bg-main);
  animation: levelGlow 2s ease-in-out infinite;
}

/* Body Card */
.profile-card-body {
  padding: 20px;
}

.profile-card-name {
  margin: 0 0 4px 0;
  font-size: 18px;
  color: var(--text-primary);
}

.profile-card-title {
  display: block;
  font-size: 11px;
  color: var(--accent-local);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 15px;
}

/* Barre XP */
.profile-xp-bar {
  position: relative;
  height: 20px;
  background: var(--bg-nav);
  border-radius: 10px;
  overflow: hidden;
  margin-bottom: 15px;
}

.xp-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--accent-local), var(--accent-cloud));
  background-size: 200% 100%;
  border-radius: 10px;
  transition: width 0.5s ease;
  animation: xpShine 2s ease-in-out infinite;
}

.xp-text {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  font-weight: bold;
  color: var(--text-primary);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

/* Bio */
.profile-card-bio {
  font-size: 12px;
  color: var(--text-secondary);
  line-height: 1.5;
  margin: 0 0 15px 0;
  padding: 10px;
  background: var(--bg-nav);
  border-radius: 8px;
  border-left: 3px solid var(--accent-local);
}

/* Stats Card */
.profile-card-stats {
  display: flex;
  justify-content: space-around;
  padding-top: 15px;
  border-top: 1px solid var(--bg-nav);
}

.profile-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.profile-stat-value {
  font-size: 18px;
  font-weight: bold;
  color: var(--accent-local);
}

.profile-stat-label {
  font-size: 10px;
  color: var(--text-secondary);
  text-transform: uppercase;
}

/* ============================================
   PROFIL - Variations par Mode
   ============================================ */

/* Mode Hyper-economique */
:root[data-mode="hyper-econome"] .orb-ring {
  animation: none;
  background: var(--accent-local);
}

:root[data-mode="hyper-econome"] .orb-status {
  animation: none;
}

:root[data-mode="hyper-econome"] .orb-level {
  animation: none;
}

:root[data-mode="hyper-econome"] .xp-fill {
  animation: none;
}

:root[data-mode="hyper-econome"] .profile-card {
  animation: none;
  border-radius: 0;
}

/* Mode Normal */
:root[data-mode="normal"] .profile-orb:hover .orb-ring {
  animation-duration: 2s;
}

:root[data-mode="normal"] .profile-card {
  border-radius: 16px;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.5);
}

:root[data-mode="normal"] .orb-level {
  border-radius: 12px;
}

/* Mode Ultra */
:root[data-mode="ultra"] .orb-ring {
  animation: orbRingRotate 3s linear infinite;
  box-shadow: 0 0 15px var(--glow-color);
}

:root[data-mode="ultra"] .profile-orb:hover .orb-ring {
  animation-duration: 1.5s;
  box-shadow: 0 0 25px var(--glow-color-intense);
}

:root[data-mode="ultra"] .orb-level {
  animation: levelGlow 2s ease-in-out infinite;
  box-shadow: 0 0 10px var(--glow-color);
}

:root[data-mode="ultra"] .profile-card {
  border-radius: 20px;
  box-shadow: 0 16px 50px rgba(0, 0, 0, 0.6), 0 0 40px var(--glow-color);
  animation: cardSlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

:root[data-mode="ultra"] .xp-fill {
  box-shadow: 0 0 15px var(--glow-color);
}

:root[data-mode="ultra"] .profile-badge.legendary {
  animation: ultraGlow 1.5s ease-in-out infinite;
}

/* Mode Supernova */
:root[data-mode="supernova"] .user-profile {
  border-left-color: var(--grid-color);
}

:root[data-mode="supernova"] .orb-ring {
  animation: orbRingRotate 2.5s linear infinite;
  box-shadow: 0 0 20px var(--nova-glow);
}

:root[data-mode="supernova"] .orb-ring::before {
  background: var(--bg-secondary);
}

:root[data-mode="supernova"] .profile-orb:hover .orb-ring {
  animation-duration: 1s;
  box-shadow: 0 0 35px var(--nova-glow-intense);
}

:root[data-mode="supernova"] .orb-status {
  border-color: var(--bg-secondary);
}

:root[data-mode="supernova"] .orb-level {
  animation: novaGlow 2s ease-in-out infinite;
  border-color: var(--bg-secondary);
}

:root[data-mode="supernova"] .profile-card {
  background: linear-gradient(145deg, #fff 0%, var(--bg-nav) 100%);
  border-radius: 24px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15), 0 0 50px var(--nova-glow);
  animation: cardSlideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

:root[data-mode="supernova"] .profile-card-header {
  background: linear-gradient(135deg, #fff 0%, var(--bg-header) 100%);
}

:root[data-mode="supernova"] .profile-card-name {
  animation: novaTextGlow 3s ease-in-out infinite;
}

:root[data-mode="supernova"] .xp-fill {
  box-shadow: 0 0 20px var(--nova-glow);
}

:root[data-mode="supernova"] .profile-badge.legendary {
  animation: novaRainbow 3s ease-in-out infinite;
}

/* ============================================
   PROFIL - Modal Edition
   ============================================ */

.profile-edit-btn {
  width: 100%;
  padding: 10px 16px;
  margin-top: 12px;
  background: linear-gradient(135deg, var(--accent-local), var(--accent-local-dim));
  border: none;
  border-radius: var(--radius);
  color: var(--text-primary);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition);
}

.profile-edit-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.profile-edit-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  opacity: 1;
  transition: opacity 0.3s ease;
}

.profile-edit-modal.hidden {
  opacity: 0;
  pointer-events: none;
}

.profile-edit-content {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  width: 90%;
  max-width: 480px;
  max-height: 90vh;
  overflow-y: auto;
  animation: cardSlideIn 0.3s ease;
}

.profile-edit-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border);
  background: var(--bg-header);
  border-radius: var(--radius-lg) var(--radius-lg) 0 0;
}

.profile-edit-header h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
}

.profile-edit-close {
  width: 32px;
  height: 32px;
  background: transparent;
  border: 1px solid var(--border);
  border-radius: 50%;
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 14px;
  font-weight: bold;
  transition: all var(--transition);
}

.profile-edit-close:hover {
  background: var(--accent-cloud);
  color: var(--text-primary);
  border-color: var(--accent-cloud);
}

#profile-edit-form {
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.profile-edit-avatar-section {
  display: flex;
  align-items: center;
  gap: 20px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--border);
}

.profile-edit-avatar-preview {
  position: relative;
  width: 80px;
  height: 80px;
  flex-shrink: 0;
}

.profile-edit-avatar-preview .orb-ring {
  width: 80px;
  height: 80px;
}

.profile-edit-avatar-preview .orb-ring::before {
  width: 70px;
  height: 70px;
}

.profile-edit-avatar-preview .orb-avatar {
  width: 66px;
  height: 66px;
}

.profile-edit-avatar-preview .orb-avatar img,
.profile-edit-avatar-preview .avatar-fallback {
  width: 66px;
  height: 66px;
  font-size: 22px;
}

.profile-edit-avatar-input {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.profile-edit-avatar-input label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.profile-edit-avatar-input input {
  padding: 10px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text-primary);
  font-size: 13px;
  transition: border-color var(--transition);
}

.profile-edit-avatar-input input:focus {
  outline: none;
  border-color: var(--accent-local);
}

.input-hint {
  font-size: 11px;
  color: var(--text-muted);
}

.profile-edit-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.profile-edit-field label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.profile-edit-field input,
.profile-edit-field textarea {
  padding: 10px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text-primary);
  font-size: 13px;
  font-family: inherit;
  resize: none;
  transition: border-color var(--transition);
}

.profile-edit-field input:focus,
.profile-edit-field textarea:focus {
  outline: none;
  border-color: var(--accent-local);
}

.char-counter {
  font-size: 11px;
  color: var(--text-muted);
  text-align: right;
}

.status-selector {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
}

.status-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text-secondary);
  font-size: 12px;
  cursor: pointer;
  transition: all var(--transition);
}

.status-option:hover {
  background: var(--bg-nav);
  border-color: var(--text-muted);
}

.status-option.active {
  background: var(--bg-nav);
  border-color: var(--accent-local);
  color: var(--text-primary);
}

.status-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  flex-shrink: 0;
}

.status-dot.online {
  background: #23a55a;
}

.status-dot.idle {
  background: #f0b232;
}

.status-dot.dnd {
  background: #f23f43;
}

.status-dot.offline {
  background: #80848e;
}

.profile-edit-actions {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  padding-top: 16px;
  border-top: 1px solid var(--border);
}

.btn-cancel {
  padding: 10px 20px;
  background: transparent;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text-secondary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition);
}

.btn-cancel:hover {
  background: var(--bg-secondary);
  color: var(--text-primary);
}

.btn-save {
  padding: 10px 24px;
  background: linear-gradient(135deg, var(--accent-local), var(--accent-local-dim));
  border: none;
  border-radius: var(--radius);
  color: var(--text-primary);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition);
}

.btn-save:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* Modal Edition - Variations par Mode */

:root[data-mode="hyper-econome"] .profile-edit-modal {
  backdrop-filter: none;
}

:root[data-mode="hyper-econome"] .profile-edit-content {
  border-radius: 0;
  animation: none;
}

:root[data-mode="hyper-econome"] .profile-edit-header {
  border-radius: 0;
}

:root[data-mode="hyper-econome"] .profile-edit-avatar-preview .orb-ring {
  animation: none;
}

:root[data-mode="normal"] .profile-edit-content {
  border-radius: 16px;
  box-shadow: 0 16px 48px rgba(0, 0, 0, 0.5);
}

:root[data-mode="ultra"] .profile-edit-content {
  border-radius: 20px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6), 0 0 40px var(--glow-color);
}

:root[data-mode="ultra"] .btn-save {
  box-shadow: 0 0 15px var(--glow-color);
}

:root[data-mode="supernova"] .profile-edit-content {
  background: linear-gradient(145deg, #fff 0%, var(--bg-nav) 100%);
  border-radius: 24px;
  box-shadow: 0 24px 80px rgba(0, 0, 0, 0.2), 0 0 60px var(--nova-glow);
}

:root[data-mode="supernova"] .profile-edit-header {
  background: linear-gradient(135deg, #fff 0%, var(--bg-header) 100%);
}

:root[data-mode="supernova"] .btn-save {
  box-shadow: 0 0 20px var(--nova-glow);
}

/* ============================================
   GENERATEUR PROMPT AVATAR
   ============================================ */

.profile-prompt-generator {
  padding: 16px 0;
  border-bottom: 1px solid var(--border);
}

.btn-generate-prompt {
  width: 100%;
  padding: 10px 16px;
  background: var(--bg-nav);
  border: 1px solid var(--accent-local);
  border-radius: var(--radius);
  color: var(--accent-local);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition);
}

.btn-generate-prompt:hover {
  background: var(--accent-local);
  color: var(--bg-main);
}

.btn-generate-prompt:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.prompt-result {
  margin-top: 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.prompt-result label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.prompt-result textarea {
  width: 100%;
  padding: 10px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text-primary);
  font-size: 12px;
  font-family: inherit;
  line-height: 1.5;
  resize: none;
}

.btn-copy-prompt {
  align-self: flex-end;
  padding: 8px 16px;
  background: var(--accent-local);
  border: none;
  border-radius: var(--radius);
  color: var(--bg-main);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition);
}

.btn-copy-prompt:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.prompt-loading {
  margin-top: 12px;
  padding: 12px;
  background: var(--bg-nav);
  border-radius: var(--radius);
  color: var(--text-secondary);
  font-size: 12px;
  text-align: center;
}

@keyframes promptPulse {
  0%, 100% { opacity: 0.5; }
  50% { opacity: 1; }
}

.prompt-loading:not(.hidden) {
  animation: promptPulse 1.5s ease-in-out infinite;
}

/* Variations par mode */
:root[data-mode="hyper-econome"] .btn-generate-prompt,
:root[data-mode="hyper-econome"] .btn-copy-prompt {
  border-radius: 0;
}

:root[data-mode="hyper-econome"] .prompt-loading {
  animation: none;
}

:root[data-mode="ultra"] .btn-generate-prompt:hover {
  box-shadow: 0 0 15px var(--glow-color);
}

:root[data-mode="ultra"] .btn-copy-prompt:hover {
  box-shadow: 0 0 15px var(--glow-color);
}

:root[data-mode="supernova"] .btn-generate-prompt:hover {
  box-shadow: 0 0 20px var(--nova-glow);
}

:root[data-mode="supernova"] .btn-copy-prompt:hover {
  box-shadow: 0 0 20px var(--nova-glow);
}
